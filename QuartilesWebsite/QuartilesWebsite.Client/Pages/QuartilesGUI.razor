@page "/"
@rendermode InteractiveServer

<PageTitle>Quartiles Cracker</PageTitle>

<h1>Quartiles Cracker</h1>

<div class="center-grid-container">
    <div class="table-wrapper">
        <table class="quartiles-grid">
            @for (int row = 0; row < Rows; row++)
            {
                <tr>
                    @for (int col = 0; col < Columns; col++)
                    {
                        Chunk chunk = GetChunk(row, col);

                        <td class="grid-letters">
                            <input class="inter-font-chunk grid-input"
                            type="text"
                            spellcheck="false"
                            @bind="chunk.Letters"
                            maxlength="@MaxChunkLength"
                            oninput="this.value = this.value.replace(/[^a-zA-Z]/g, '')"
                            alt="Cell @row @col" />
                        </td>
                    }
                </tr>
            }
        </table>

        <button class="grid-submit-button" type="button" @onclick="SubmitGrid">Find Solutions</button>
    </div>
</div>

@if (Solutions != null && Solutions.Count > 0)
{
    <h1 class="solutions-title inter-font-chunk">@Solutions.Count Possible Solutions Found!</h1>

    var SeparateChunkSizeSolutions = GetSeparateChunkSizeSolutions();

    <div class="solutions-container-all">
        @foreach (var solutionSize in SeparateChunkSizeSolutions)
        {
            int chunkSize = solutionSize.Key;
            HashSet<string> solutions = solutionSize.Value;

            <div class="solutions-container-individual">
                <h3 class="solutions-title-individual inter-font-chunk">Size @chunkSize Solutions</h3>
                <table class="solution-table-display quartiles-grid">
                    @foreach (var solution in solutions)
                    {
                        var chunks = SolutionChunkMapping[solution];

                        <tr>
                            <td class="solution-word inter-font-chunk">@solution</td>

                            @foreach (var chunk in chunks)
                            {
                                <td class="solution-chunk inter-font-chunk grid-letters">@chunk</td>
                            }
                        </tr>
                    }
                </table>
            </div>
        }
    </div>
}